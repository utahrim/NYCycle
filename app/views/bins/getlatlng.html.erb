<h1>Your Location (A) | The Closest Recycling Bin (B)</h1>
<div id="map"></div>

<script type="text/javascript">

var map;
function initMap() {

  var user = {lat: <%= @user_location.lat %>, lng: <%= @user_location.lng %>};
  var bin = {lat: <%= @bin.latitude %>, lng: <%= @bin.longitude %>};

  var map = new google.maps.Map(document.getElementById('map'), {
    center: user,
    scrollwheel: false,
    zoom: 7
  });

  var directionsDisplay = new google.maps.DirectionsRenderer({
    map: map
  });

  var request = {
    destination: bin,
    origin: user,
    travelMode: google.maps.TravelMode.WALKING
  };

  var directionsService = new google.maps.DirectionsService();
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {

      directionsDisplay.setDirections(response);
    }
  });
}

    // var person_image = "<%= image_url "person.png" %>";

    // var recycling_image = "<%= image_url "recycle_icon2.png" %>";

    // var user_location_info = "You are here"

    // var bin_location_info = "Here is the closest recycling bin"

    // var infowindowUser = new google.maps.InfoWindow({
    // content: user_location_info
    // });

    // var infowindowBin = new google.maps.InfoWindow({
    // content: bin_location_info
    // });

    // var you = new google.maps.Marker({
    //   position: {lat: <%= @user_location.lat %>, lng: <%= @user_location.lng %>},
    //   map: map,
    //   title: 'You!',
    //   label: "Y",
    //   animation: google.maps.Animation.DROP
    //   // icon: person_image
    // });

    // you.addListener('click', function() {
    // infowindowUser.open(map, you);
    // });

    // var bin = new google.maps.Marker({
    //   position: {lat: <%= @bin.latitude %>, lng: <%= @bin.longitude %>},
    //   map: map,
    //   title: 'Your bin!',
    //   label: "B",
    //   animation: google.maps.Animation.DROP
    //   // icon: recycling_image
    // });

    // bin.addListener('click', function() {
    // infowindowBin.open(map, bin);
    // });

</script>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCTprEG2S0w5APdH4WRIC2ks0aDhMSfyac&callback=initMap">
</script>
